root		:			statements
			|

statements	:			statements statement
			|			statements , statement
			|			statement

statement	:			expr
			|			CALC ID
			|			ids_assign expr
			|			EXIT
			|			VARS
			|			NEW
			|			POLAR expr

ids_assign	:			ID ASSIGN
			|			ids_assign ID ASSIGN

expr		:			expr + expr
			|			expr - expr
			|			expr * expr
			|			expr / expr
			|			expr ^ expr
			|			- expr							%prec UMINUS
			|			mini_term
			|			NUMBER
			|			expr THEN expr
			|			expr THEN ' ID expr '
			|			expr WITH with_assigns

with_assigns:			ID ASSIGN expr SEMI
			|			with_assigns ID ASSIGN expr SEMI

mini_term	:			ID
			|			NUMBER mini_term				%prec CONSTANT
			|			LPAREN expr RPAREN mini_term 	%prec CONSTANT
			|			NUMBER mini_term POW expr
			|			MATHFUNC LPAREN expr RPAREN
			|			LPAREN expr RPAREN

------

precedence = (
    ('right', ASSIGN),
    ('left', THEN),
    ('left', PLUS, MINUS),
    ('left', TIMES, DIV),
    ('right', CONSTANT),
    ('right', MATHFUNC, UMINUS),
    ('right', POW),
)